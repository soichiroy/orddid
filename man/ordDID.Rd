% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/orddid-semiparametric-wrapper.R
\name{ordDID}
\alias{ordDID}
\title{Semiparametric Ordinal Difference-in-Differences}
\usage{
ordDID(
  data,
  outcome,
  treatment,
  post,
  covariates = NULL,
  weights = NULL,
  solver = c("spectral", "BB"),
  verbose = FALSE
)
}
\arguments{
\item{data}{A data frame containing the outcome, treatment indicator,
post-period indicator, and covariates.}

\item{outcome}{Character scalar giving the name of the ordinal outcome
variable.  The variable can be numeric or a (ordered) factor; it will be
internally recoded to consecutive integers starting at one.}

\item{treatment}{Character scalar giving the name of the treatment indicator
(0/1 or logical).}

\item{post}{Character scalar giving the name of the post-period indicator
(0/1 or logical).}

\item{covariates}{Optional character vector with the names of covariates to
include in the location and scale equations.  When omitted, an intercept-only
specification is used.}

\item{weights}{Optional character scalar naming a column with non-negative
sampling weights.  When \code{NULL} (default) all observations receive equal
weight.}

\item{solver}{Character scalar selecting the root-finding algorithm used in
the moment conditions.  Passed to \code{stage1ii_solve()} and
\code{ord_locscale_fit()} (either \code{"spectral"} or \code{"BB"}).}

\item{verbose}{Logical; if \code{TRUE}, progress information from the
underlying solvers is printed.}
}
\value{
A list with class \code{"orddid.semipar"} containing
  \describe{
    \item{zeta}{Estimated difference-in-differences effects on the category
      probabilities (treated post minus counterfactual without treatment).}
    \item{p_observed}{Average predicted probabilities for the treated post
      observations.}
    \item{p_counterfactual}{Average predicted probabilities for the treated
      post observations under the no-treatment counterfactual implied by the
      model.}
    \item{Fhat}{The estimated latent cumulative distribution function from the
      isotonic first step (an object of class \code{"FhatIsotonic"}).}
    \item{theta}{A named list with the location and scale coefficients for
      each group/period cell (\code{beta} and \code{gamma}).}
    \item{cutoffs}{Numeric vector with the estimated threshold(s) separating
      the outcome categories.}
    \item{cell_fits}{The full location-scale fits for each of the four cells
      (useful for additional diagnostics or prediction).}
    \item{levels}{The original outcome levels corresponding to the returned
      probabilities.}
  }
}
\description{
Provides a high-level wrapper around the semiparametric estimation steps
implemented in \code{orddid}'s internal helpers.  The routine follows the
two-step procedure described in Yamauchi (2024): (i) recover the common
latent distribution and cutoff via isotonic regression and (ii) estimate the
location-scale parameters for each group/period cell.  The function then
combines the fitted objects to deliver difference-in-differences treatment
effects on the category probabilities along with the reusable quantities that
underpin the estimator.
}
