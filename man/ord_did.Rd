% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/orddid.R
\name{ord_did}
\alias{ord_did}
\title{Ordinal Difference-in-Differences for Panel Data}
\usage{
ord_did(
  data,
  outcome,
  post,
  treat,
  cluster,
  n_boot = 500,
  use_parallel = FALSE,
  method = c("parametric", "semiparametric", "parametric_covariates"),
  covariates = NULL,
  fixed_index = 1,
  n_cores = NULL
)
}
\arguments{
\item{data}{A data frame containing the variables.}

\item{outcome}{Character scalar; column name for the outcome variable.}

\item{post}{Character scalar; column name for the post-period indicator.}

\item{treat}{Character scalar; column name for the treatment indicator.}

\item{cluster}{Character scalar; column name for the cluster id.}

\item{n_boot}{The number of bootstrap iterations. Default is \code{n_boot = 500}.}

\item{use_parallel}{If \code{TRUE}, use parallel computing for bootstrap.}

\item{method}{Character; \code{"parametric"} (default) for ordered probit
without covariates, \code{"semiparametric"} for NPMLE-based semiparametric
estimation with covariates, or \code{"parametric_covariates"} for ordered
probit with covariates (uses normal CDF instead of semiparametric F).}

\item{covariates}{Character vector of covariate column names (required for
\code{method = "semiparametric"} and \code{method = "parametric_covariates"}).
The first covariate should be a continuous variable with positive Lebesgue
density (no intercept is added; the cutpoints handle the baseline level).}

\item{fixed_index}{Integer; which column of the covariate matrix to normalize
in the semiparametric Step 1 (default 1, i.e., the first covariate).}

\item{n_cores}{Integer; number of cores for parallel computing. Default
\code{NULL} uses all available cores minus one.}
}
\value{
A list with components:
\item{inputs}{Function arguments for reproducibility.}
\item{estimate_effects}{Data frame of category-specific effects with CIs.}
\item{relative_effects}{Data frame of relative treatment effect bounds with CIs.}
}
\description{
\code{ord_did()} implements the difference-in-differences for the ordinal outcome.
}
\examples{
\donttest{
## load packages
library(orddid)
library(dplyr)

## load example data
data("gun_twowave")

## run
## fit the ordinal DID
set.seed(1234)
treated_id <- gun_twowave \%>\%
  filter(treat_25mi == 1) \%>\%
  select(caseid, treated_group = treat_25mi)
dat_use <- gun_twowave \%>\%
  left_join(treated_id, by = "caseid") \%>\%
  mutate(
    post = ifelse(year == 2012, TRUE, FALSE),
    treated = ifelse(!is.na(treated_group), TRUE, FALSE)
  )

dat_use \%>\%
  group_by(pid3) \%>\%
  group_map(
    ~ ord_did(
      data = .x,
      outcome = "guns",
      post = "post",
      treat = "treated",
      cluster = "caseid"
    )
  )

## view summary of the output
## non-cumulative effects
summary(fit, cumulative = FALSE)

## cumulative effects
summary(fit)
}
}
